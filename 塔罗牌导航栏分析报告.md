# å¡”ç½—ç‰Œåº”ç”¨å¯¼èˆªæ ç»Ÿä¸€è®¾è®¡åˆ†ææŠ¥å‘Š

## ğŸ“‹ å½“å‰é—®é¢˜åˆ†æ

### 1. å¯¼èˆªæ ä¸ç»Ÿä¸€
- **æ ‡é¢˜è®¾ç½®ä¸ä¸€è‡´**
  - ViewController: "æ¯æ—¥å¡”ç½—ç‰Œ"
  - DrawViewController: "" (ç©ºæ ‡é¢˜)
  - ResultViewController: "" (ç©ºæ ‡é¢˜)
  - AppreciationViewController: ç¼ºå°‘æ ‡é¢˜è®¾ç½®

- **æŒ‰é’®æ ·å¼å„å¼‚**
  - ä¸åŒçš„åœ†è§’ã€é¢œè‰²ã€é˜´å½±æ•ˆæœ
  - æ²¡æœ‰ç»Ÿä¸€çš„è§†è§‰è¯­è¨€

### 2. ç¼ºå°‘åº•éƒ¨å¯¼èˆªæ 
- **ä¸»è¦åŠŸèƒ½æ— ç»Ÿä¸€å…¥å£**
  - ç”¨æˆ·ä¸çŸ¥é“å¦‚ä½•å¿«é€Ÿåˆ‡æ¢æ ¸å¿ƒåŠŸèƒ½
  - éœ€è¦é€šè¿‡å†å²è®°å½•æˆ–å¤šæ¬¡ç‚¹å‡»è¿›å…¥

- **å±‚çº§å…³ç³»ä¸æ¸…æ™°**
  - ä¸»é¡µ â†’ æŠ½å¡/é‰´èµ/æ”¶è—
  - æŠ½å¡é¡µé¢ â†’ æ¯æ—¥ä¸€ç­¾
  - ç»“æœé¡µé¢ â†’ å†æ¬¡æŠ½å¡
  - é‰´èµé¡µé¢ â†’ å¡ç‰Œè¯¦æƒ…

### 3. å…¥å£æµç¨‹ä¸ä¼˜åŒ–
- **"æ¯æ—¥ä¸€ç­¾"å…¥å£åˆ†æ•£**
  - ä¸»é¡µæ²¡æœ‰æ˜æ˜¾å…¥å£
  - æŠ½å¡é¡µé¢åœ¨é¡¶éƒ¨
  - ç”¨æˆ·å¯èƒ½å®¹æ˜“é”™è¿‡

- **è¿”å›æŒ‰é’®ä½“éªŒä¸ä¸€è‡´**
  - æœ‰çš„ä½¿ç”¨ç³»ç»Ÿå¯¼èˆªæ è¿”å›
  - æœ‰çš„é¡µé¢æ²¡æœ‰æ˜ç¡®çš„è¿”å›å…¥å£

### 4. è§†è§‰ä½“éªŒä¸ç»Ÿä¸€
- **èƒŒæ™¯ç‰¹æ•ˆä¸ä¸€è‡´**
  - æœ‰çš„é¡µé¢æœ‰æ˜Ÿç©ºç²’å­
  - æœ‰çš„é¡µé¢æ²¡æœ‰
  - æœ‰çš„é¡µé¢æœ‰ç¯å¢ƒå…‰å‘¼å¸æ•ˆæœ

- **é¢œè‰²æ–¹æ¡ˆåº”ç”¨ä¸ç»Ÿä¸€**
  - éƒ¨åˆ†æŒ‰é’®ä½¿ç”¨ç´«è‰²ï¼Œéƒ¨åˆ†ä½¿ç”¨è“è‰²
  - å¼ºè°ƒè‰²ä½¿ç”¨ä¸ä¸€è‡´

---

## ğŸ¯ ç»Ÿä¸€å¯¼èˆªæ è®¾è®¡æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šé¡¶éƒ¨å¯¼èˆªæ  + åº•éƒ¨æ ‡ç­¾æ 

#### **é¡¶éƒ¨å¯¼èˆªæ è®¾è®¡**
```swift
// å¯¼èˆªæ é…ç½®ç¤ºä¾‹
extension UIViewController {
    func setupUnifiedNavigationBar(title: String) {
        self.title = title
        navigationItem.largeTitleDisplayMode = .never

        // è‡ªå®šä¹‰å¯¼èˆªæ æ ·å¼
        let appearance = UINavigationBarAppearance()
        appearance.configureWithOpaqueBackground()
        appearance.backgroundColor = APPConstants.Color.navBackgroundColor
        appearance.titleTextAttributes = [
            .foregroundColor: APPConstants.Color.navTitleColor,
            .font: UIFont.systemFont(ofSize: 18, weight: .semibold)
        ]
        appearance.shadowColor = APPConstants.Color.navShadowColor

        navigationController?.navigationBar.standardAppearance = appearance
        navigationController?.navigationBar.scrollEdgeAppearance = appearance
        navigationController?.navigationBar.compactAppearance = appearance
    }
}
```

**ç»Ÿä¸€æ ‡é¢˜åˆ—è¡¨**ï¼š
- ä¸»é¡µ (ViewController): "æ¯æ—¥å¡”ç½—ç‰Œ"
- æŠ½å¡ (DrawViewController): "å¡”ç½—å åœ"
- ç»“æœ (ResultViewController): "æŠ½ç‰Œç»“æœ"
- é‰´èµ (AppreciationViewController): "æ˜Ÿç©ºé‰´èµ"
- æ”¶è— (FavoritesViewController): "æˆ‘çš„æ”¶è—"
- è¯¦æƒ… (CardDetailViewController): "å¡ç‰Œè¯¦æƒ…"
- æ¯æ—¥ä¸€ç­¾ (DailyDrawViewController): "æ¯æ—¥ä¸€ç­¾"
- æ¯æ—¥ç­¾å†å² (DailyDrawHistoryViewController): "ç­¾åˆ°å†å²"

#### **åº•éƒ¨æ ‡ç­¾æ è®¾è®¡**

```swift
// åº•éƒ¨æ ‡ç­¾æ é…ç½®
let tabBarController = UITabBarController()

// æ ‡ç­¾é¡µæ•°ç»„
let viewControllers = [
    {
        let vc = ViewController()
        vc.tabBarItem = UITabBarItem(title: "æ¯æ—¥å¡”ç½—", image: UIImage(systemName: "star.fill"), tag: 0)
        return vc
    }(),
    {
        let vc = DrawViewController()
        vc.tabBarItem = UITabBarItem(title: "å åœè®°å½•", image: UIImage(systemName: "history"), tag: 1)
        return vc
    }(),
    {
        let vc = AppreciationViewController()
        vc.tabBarItem = UITabBarItem(title: "æ˜Ÿç©ºé‰´èµ", image: UIImage(systemName: "sparkles"), tag: 2)
        return vc
    }(),
    {
        let vc = FavoritesViewController()
        vc.tabBarItem = UITabBarItem(title: "æˆ‘çš„æ”¶è—", image: UIImage(systemName: "heart.fill"), tag: 3)
        return vc
    }()
]

tabBarController.viewControllers = viewControllers

// è‡ªå®šä¹‰æ ‡ç­¾æ æ ·å¼
if let appearance = tabBarController.tabBar.standardAppearance {
    appearance.configureWithOpaqueBackground()
    appearance.backgroundColor = APPConstants.Color.tabBarBackgroundColor
    appearance.shadowColor = APPConstants.Color.tabBarShadowColor

    appearance.stackedLayoutAppearance.normal.iconColor = APPConstants.Color.tabIconNormal
    appearance.stackedLayoutAppearance.normal.titleTextAttributes = [
        .foregroundColor: APPConstants.Color.tabTitleNormal
    ]

    appearance.stackedLayoutAppearance.selected.iconColor = APPConstants.Color.tabIconSelected
    appearance.stackedLayoutAppearance.selected.titleTextAttributes = [
        .foregroundColor: APPConstants.Color.tabTitleSelected
    ]
}
```

**åº•éƒ¨æ ‡ç­¾é…ç½®**ï¼š
- ğŸŒŸ æ¯æ—¥å¡”ç½— - ä¸»é¡µï¼Œæ˜¾ç¤ºä¸‰å¼ å¡ç‰Œ + é‰´èµæ¨¡å¼å…¥å£
- ğŸ“œ å åœè®°å½• - å†å²è®°å½• + æ¯æ—¥ä¸€ç­¾
- âœ¨ æ˜Ÿç©ºé‰´èµ - 24å¼ å¡ç‰Œç”»å»Š
- â¤ï¸ æˆ‘çš„æ”¶è— - æ”¶è—çš„å¡ç‰Œ

---

## ğŸ”„ ä¼˜åŒ–åçš„é¡µé¢æµç¨‹

### 1. å¯åŠ¨æµç¨‹
```
AppDelegate/SceneDelegate
  â†“
ç™»å½•/æƒé™æ£€æŸ¥
  â†“
TabBarController (åº•éƒ¨æ ‡ç­¾æ )
  â”œâ”€ ğŸŒŸ æ¯æ—¥å¡”ç½— (é»˜è®¤)
  â”œâ”€ ğŸ“œ å åœè®°å½•
  â”œâ”€ âœ¨ æ˜Ÿç©ºé‰´èµ
  â””â”€ â¤ï¸ æˆ‘çš„æ”¶è—
```

### 2. ä¸»é¡µæµç¨‹
```
ğŸŒŸ æ¯æ—¥å¡”ç½—
  â”œâ”€ æ˜¾ç¤ºä¸‰å¼ å¡ç‰ŒèƒŒé¢
  â”œâ”€ ç‚¹å‡»"å»æŠ½å¡" â†’ æŠ½å¡é¡µé¢
  â”œâ”€ ç‚¹å‡»"é‰´èµæ¨¡å¼" â†’ é‰´èµæ¨¡å¼é¡µé¢
  â”œâ”€ ç‚¹å‡»"æ”¶è—" â†’ æ”¶è—é¡µé¢
  â””â”€ ç‚¹å‡»"æ¯æ—¥ä¸€ç­¾" â†’ æ¯æ—¥ä¸€ç­¾é¡µé¢
```

### 3. æŠ½å¡é¡µé¢æµç¨‹
```
ğŸ“œ å åœè®°å½•
  â”œâ”€ é¡¶éƒ¨æœç´¢æ¡†ï¼ˆæœç´¢å†å²è®°å½•ï¼‰
  â”œâ”€ "âœ¨ æ¯æ—¥ä¸€ç­¾"æŒ‰é’® â†’ æ¯æ—¥ä¸€ç­¾é¡µé¢
  â”œâ”€ "é‰´èµæ¨¡å¼"æŒ‰é’® â†’ é‰´èµæ¨¡å¼é¡µé¢
  â”œâ”€ å†å²è®°å½•åˆ—è¡¨ â†’ ç‚¹å‡» â†’ ç»“æœé¡µé¢
  â”œâ”€ ç‚¹å‡»åŠ å· â†’ ç»“æœé¡µé¢ï¼ˆç›´æ¥æŠ½å¡ï¼‰
  â””â”€ æ¯æ—¥ä¸€ç­¾å¼•å¯¼å¼¹çª—
```

### 4. ç»“æœé¡µé¢æµç¨‹
```
æŠ½ç‰Œç»“æœ
  â”œâ”€ æ˜¾ç¤ºä¸‰å¼ ç¿»å¼€çš„å¡ç‰Œ
  â”œâ”€ ç‚¹å‡»"å†æ¬¡æŠ½å¡" â†’ æŠ½å¡é¡µé¢
  â”œâ”€ ç‚¹å‡»"åˆ†äº«" â†’ åˆ†äº«é¡µé¢
  â””â”€ AIè§£æï¼ˆè‡ªåŠ¨åŠ è½½ï¼‰
```

### 5. é‰´èµæ¨¡å¼æµç¨‹
```
âœ¨ æ˜Ÿç©ºé‰´èµ
  â”œâ”€ 24å¼ å¡ç‰Œç½‘æ ¼å±•ç¤º
  â”œâ”€ ç‚¹å‡»ä»»æ„å¡ç‰Œ â†’ å¡ç‰Œè¯¦æƒ…é¡µé¢
  â””â”€ æ¯æ—¥ä¸€ç­¾å¼•å¯¼æç¤º
```

### 6. æ”¶è—é¡µé¢æµç¨‹
```
â¤ï¸ æˆ‘çš„æ”¶è—
  â”œâ”€ æ”¶è—çš„å¡ç‰Œåˆ—è¡¨
  â”œâ”€ ç‚¹å‡»ä»»æ„å¡ç‰Œ â†’ å¡ç‰Œè¯¦æƒ…é¡µé¢
  â””â”€ ç©ºçŠ¶æ€æç¤º
```

### 7. å¡ç‰Œè¯¦æƒ…æµç¨‹
```
å¡ç‰Œè¯¦æƒ…
  â”œâ”€ å¡ç‰Œå¤§å›¾å±•ç¤º
  â”œâ”€ æ­£ä½/é€†ä½å«ä¹‰
  â”œâ”€ è¿”å› â†’ é‰´èµæ¨¡å¼é¡µé¢
  â””â”€ è¿”å› â†’ ä¸»é¡µ/æŠ½å¡é¡µé¢ï¼ˆæ ¹æ®å…¥å£ï¼‰
```

---

## ğŸ¨ è§†è§‰ç»Ÿä¸€è®¾è®¡

### é¢œè‰²é…ç½®
```swift
// ConstantsConfig.swift æ‰©å±•
extension APPConstants.Color {
    // å¯¼èˆªæ 
    static let navBackgroundColor = UIColor(hex: "2D1344")  // æ·±ç´«
    static let navTitleColor = .white
    static let navShadowColor = UIColor.white.withAlphaComponent(0.1)

    // åº•éƒ¨æ ‡ç­¾æ 
    static let tabBarBackgroundColor = UIColor(hex: "2D1344")
    static let tabBarShadowColor = UIColor.black.withAlphaComponent(0.2)

    // æ ‡ç­¾å›¾æ ‡
    static let tabIconNormal = UIColor.white.withAlphaComponent(0.5)
    static let tabIconSelected = UIColor(hex: "A5F2FF")  // é’ç´«è‰²

    // æ ‡ç­¾æ–‡å­—
    static let tabTitleNormal = UIColor.white.withAlphaComponent(0.6)
    static let tabTitleSelected = UIColor(hex: "A5F2FF")
}
```

### æŒ‰é’®æ ·å¼ç»Ÿä¸€
```swift
// ç»Ÿä¸€çš„æŒ‰é’®æ ·å¼é…ç½®
extension UIButton {
    func setupPrimaryButton(title: String, color: UIColor) {
        self.setTitle(title, for: .normal)
        self.setTitleColor(.white, for: .normal)
        self.backgroundColor = color
        self.layer.cornerRadius = 22  // ç»Ÿä¸€åœ†è§’
        self.layer.shadowColor = color.cgColor
        self.layer.shadowRadius = 8
        self.layer.shadowOpacity = 0.6
        self.layer.shadowOffset = CGSize(width: 0, height: 4)
    }

    func setupSecondaryButton(title: String, color: UIColor) {
        self.setTitle(title, for: .normal)
        self.setTitleColor(color, for: .normal)
        self.backgroundColor = .clear
        self.layer.cornerRadius = 22
        self.layer.borderWidth = 1
        self.layer.borderColor = color.cgColor
    }
}
```

### èƒŒæ™¯ç‰¹æ•ˆç»Ÿä¸€
```swift
// æ¯ä¸ªé¡µé¢ç»Ÿä¸€èƒŒæ™¯ç‰¹æ•ˆ
extension UIViewController {
    func setupPageBackground(hasStarfield: Bool = true, hasAmbientLight: Bool = true) {
        // æ·±ç´«è‰²æ¸å˜èƒŒæ™¯
        let colors = [
            UIColor(hex: "2D1344").cgColor,
            UIColor(hex: "1E1233").cgColor,
            UIColor(hex: "120632").cgColor
        ]
        let backgroundLayer = CAGradientLayer()
        backgroundLayer.colors = colors
        backgroundLayer.startPoint = CGPoint(x: 0.5, y: 0)
        backgroundLayer.endPoint = CGPoint(x: 0.5, y: 1)
        backgroundLayer.locations = [0.0, 0.5, 1.0]
        backgroundLayer.frame = view.bounds
        view.layer.insertSublayer(backgroundLayer, at: 0)

        // æ˜Ÿç©ºç²’å­ç‰¹æ•ˆ
        ParticleManager.addStarfield(to: view)

        // ç¯å¢ƒå…‰å‘¼å¸æ•ˆæœ
        let ambientLight = UIView()
        ambientLight.backgroundColor = APPConstants.Color.explanationColor
        ambientLight.alpha = 0.08
        view.addSubview(ambientLight)
        ambientLight.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }

        // å¯åŠ¨å‘¼å¸åŠ¨ç”»
        animateAmbientLight(ambientLight)
    }

    private func animateAmbientLight(_ view: UIView) {
        UIView.animate(withDuration: 3, delay: 0, options: [.repeat, .autoreverse]) {
            view.alpha = 0.15
        }
    }
}
```

---

## ğŸ“ å®æ–½æ­¥éª¤

### é˜¶æ®µä¸€ï¼šåº•éƒ¨æ ‡ç­¾æ 
1. åˆ›å»º UITabBarController
2. é…ç½®å››ä¸ªä¸»è¦é¡µé¢
3. è®¾ç½®ç»Ÿä¸€æ ‡ç­¾æ æ ·å¼
4. æµ‹è¯•åº•éƒ¨å¯¼èˆªåŠŸèƒ½

### é˜¶æ®µäºŒï¼šé¡¶éƒ¨å¯¼èˆªæ 
1. åˆ›å»ºç»Ÿä¸€å¯¼èˆªæ é…ç½®
2. æ›´æ–°æ‰€æœ‰é¡µé¢çš„æ ‡é¢˜
3. ç»Ÿä¸€æŒ‰é’®æ ·å¼
4. æµ‹è¯•å¯¼èˆªæ è¿”å›åŠŸèƒ½

### é˜¶æ®µä¸‰ï¼šèƒŒæ™¯ç‰¹æ•ˆç»Ÿä¸€
1. åˆ›å»ºèƒŒæ™¯ç‰¹æ•ˆå·¥å…·æ–¹æ³•
2. åœ¨æ¯ä¸ªé¡µé¢è°ƒç”¨ç»Ÿä¸€æ–¹æ³•
3. æµ‹è¯•è§†è§‰ä¸€è‡´æ€§

### é˜¶æ®µå››ï¼šå…¥å£æµç¨‹ä¼˜åŒ–
1. è°ƒæ•´ä¸»é¡µå…¥å£
2. ä¼˜åŒ–æŠ½å¡é¡µé¢å¸ƒå±€
3. æ·»åŠ æ¯æ—¥ä¸€ç­¾å¼•å¯¼
4. æµ‹è¯•å®Œæ•´æµç¨‹

---

## âœ… é¢„æœŸæ•ˆæœ

### ç”¨æˆ·ä½“éªŒæå‡
- **æ¸…æ™°çš„å¯¼èˆªç»“æ„**ï¼šç”¨æˆ·å¯ä»¥å¿«é€Ÿåˆ‡æ¢ä¸»è¦åŠŸèƒ½
- **ä¸€è‡´çš„è§†è§‰é£æ ¼**ï¼šç»Ÿä¸€çš„é¢œè‰²ã€æŒ‰é’®ã€èƒŒæ™¯ç‰¹æ•ˆ
- **ä¼˜åŒ–çš„å…¥å£æµç¨‹**ï¼šæ¯å¤©ç­¾åˆ°ã€æŠ½å¡ã€é‰´èµæ›´ç›´è§‚

### å¼€å‘ä½“éªŒæå‡
- **ç»Ÿä¸€çš„ä»£ç æ¨¡å¼**ï¼šå‡å°‘é‡å¤ä»£ç 
- **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹ä¸€å¤„å³å¯å½±å“æ‰€æœ‰é¡µé¢
- **æ˜“äºæ‰©å±•**ï¼šæ·»åŠ æ–°åŠŸèƒ½æ›´å®¹æ˜“

---

_ç”±é™ˆæŸ”å’Œäº²çˆ±çš„å…±åŒè®¾è®¡å®Œæˆ_
